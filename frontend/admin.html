<!DOCTYPE html>
<html lang="ru" class="h-full bg-gray-50">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NETI WASH - Админ-панель</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#07AB66',
                        accent: '#DE093B',
                        dark: '#2B2A29',
                        warn: '#F2BA23',
                        gray: { sec: '#676767', light: '#9C9C9C', bg: '#F5F5F5' }
                    },
                    fontFamily: { sans: ['Manrope', 'sans-serif'] },
                    boxShadow: { 'card': '0 2px 12px rgba(0, 0, 0, 0.04)' }
                }
            }
        }
    </script>
    <link href="fonts/fonts.css" rel="stylesheet">
</head>

<body class="h-full font-sans text-dark bg-gray-50" data-admin-page="dashboard">

    <div class="flex h-full overflow-hidden">
        <!-- Mobile menu toggle button -->
        <button id="mobileMenuBtn"
            class="fixed bottom-6 right-6 z-50 md:hidden w-14 h-14 bg-primary text-white rounded-full shadow-lg flex items-center justify-center hover:bg-primary/90 transition-all">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                </path>
            </svg>
        </button>

        <!-- Sidebar (desktop always visible, mobile overlay) -->
        <aside id="adminSidebar"
            class="w-64 bg-[#2B2A29] text-white flex-shrink-0 fixed md:relative inset-y-0 left-0 z-40 transform -translate-x-full md:translate-x-0 transition-transform duration-300">
            <!-- Sidebar content will be injected by admin-nav.js -->
        </aside>

        <!-- Overlay for mobile -->
        <div id="sidebarOverlay" class="fixed inset-0 bg-black/50 z-30 md:hidden hidden"></div>

        <!-- Main content -->
        <div class="flex-1 flex flex-col h-full overflow-hidden">
            <!-- Header -->
            <header class="bg-white px-6 py-4 shadow-sm z-10 flex justify-between items-center">
                <div>
                    <div class="text-xs font-bold text-primary uppercase tracking-wider">Панель управления</div>
                    <h1 class="text-2xl font-extrabold text-dark">Dashboard</h1>
                </div>
                <div class="text-sm text-gray-sec font-semibold" id="currentTime"></div>
            </header>

            <!-- Content -->
            <main class="flex-1 overflow-y-auto p-6 bg-gray-50">
                <!-- Statistics -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div
                        class="bg-white p-6 rounded-2xl shadow-card border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center gap-3 mb-2">
                            <div
                                class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center text-primary">
                                <svg width="24" height="24" viewBox="0 0 28 28" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <rect width="28" height="28" rx="14" fill="currentColor" />
                                    <path d="M20.6667 9L11.5 18.1667L7.33337 14" stroke="white" stroke-width="2.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Активные</div>
                        </div>
                        <div class="text-3xl font-extrabold text-primary" id="stat-active">-</div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-card border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 bg-yellow-50 rounded-xl flex items-center justify-center">
                                <svg width="24" height="24" viewBox="0 0 32 32" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M16.0001 8.00001V16L21.3334 18.6667M29.3334 16C29.3334 23.3638 23.3639 29.3333 16.0001 29.3333C8.63628 29.3333 2.66675 23.3638 2.66675 16C2.66675 8.63621 8.63628 2.66667 16.0001 2.66667C23.3639 2.66667 29.3334 8.63621 29.3334 16Z"
                                        stroke="#F2BA23" stroke-width="2.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Ожидают</div>
                        </div>
                        <div class="text-3xl font-extrabold text-gray-700" id="stat-pending">-</div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-card border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 bg-red-50 rounded-xl flex items-center justify-center text-accent">
                                <svg width="24" height="24" viewBox="0 0 48 48" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M29.4 12.6C29.0335 12.9738 28.8282 13.4765 28.8282 14C28.8282 14.5235 29.0335 15.0261 29.4 15.4L32.6 18.6C32.9738 18.9664 33.4764 19.1717 34 19.1717C34.5235 19.1717 35.0261 18.9664 35.4 18.6L42.94 11.06C43.9456 13.2823 44.2501 15.7584 43.8129 18.1583C43.3756 20.5581 42.2174 22.7676 40.4925 24.4925C38.7676 26.2174 36.5581 27.3756 34.1582 27.8129C31.7584 28.2501 29.2823 27.9456 27.06 26.94L13.24 40.76C12.4443 41.5556 11.3652 42.0026 10.24 42.0026C9.11474 42.0026 8.0356 41.5556 7.23995 40.76C6.44431 39.9643 5.99731 38.8852 5.99731 37.76C5.99731 36.6347 6.44431 35.5556 7.23995 34.76L21.06 20.94C20.0543 18.7176 19.7498 16.2415 20.187 13.8417C20.6243 11.4418 21.7825 9.23227 23.5074 7.5074C25.2323 5.78253 27.4418 4.6243 29.8417 4.18704C32.2415 3.74979 34.7176 4.05429 36.94 5.05996L29.4 12.6Z"
                                        stroke="currentColor" stroke-width="4" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Ремонт</div>
                        </div>
                        <div class="text-3xl font-extrabold text-accent" id="stat-repair">-</div>
                    </div>
                    <div
                        class="bg-white p-6 rounded-2xl shadow-card border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center text-dark">
                                <svg width="24" height="24" viewBox="0 0 48 48" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M24 40V20M36 40V8M12 40V32" stroke="currentColor" stroke-width="4"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="text-xs text-gray-500 font-bold uppercase">За сегодня</div>
                        </div>
                        <div class="text-3xl font-extrabold text-dark" id="stat-today">-</div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6 pb-20 md:pb-0">
                    <!-- Machines Management -->
                    <div class="bg-white p-6 rounded-2xl shadow-card border border-gray-100">
                        <h2 class="text-lg font-bold mb-4 flex items-center gap-2">
                            <span>
                                <svg width="24" height="24" viewBox="0 0 48 48" fill="none" stroke="#2B2A29"
                                    stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
                                    <path
                                        d="M29.4 12.6C29.0335 12.9738 28.8282 13.4765 28.8282 14C28.8282 14.5235 29.0335 15.0261 29.4 15.4L32.6 18.6C32.9738 18.9664 33.4764 19.1717 34 19.1717C34.5235 19.1717 35.0261 18.9664 35.4 18.6L42.94 11.06C43.9456 13.2823 44.2501 15.7584 43.8129 18.1583C43.3756 20.5581 42.2174 22.7676 40.4925 24.4925C38.7676 26.2174 36.5581 27.3756 34.1582 27.8129C31.7584 28.2501 29.2823 27.9456 27.06 26.94L13.24 40.76C12.4443 41.5556 11.3652 42.0026 10.24 42.0026C9.11474 42.0026 8.0356 41.5556 7.23995 40.76C6.44431 39.9643 5.99731 38.8852 5.99731 37.76C5.99731 36.6347 6.44431 35.5556 7.23995 34.76L21.06 20.94C20.0543 18.7176 19.7498 16.2415 20.187 13.8417C20.6243 11.4418 21.7825 9.23227 23.5074 7.5074C25.2323 5.78253 27.4418 4.6243 29.8417 4.18704C32.2415 3.74979 34.7176 4.05429 36.94 5.05996L29.4 12.6Z" />
                                </svg>
                            </span>
                            Управление машинками
                        </h2>
                        <div id="machinesList" class="space-y-3">
                            <!-- Filled by JS -->
                        </div>
                    </div>

                    <!-- Recent Bookings -->
                    <div class="bg-white p-6 rounded-2xl shadow-card border border-gray-100">
                        <h2 class="text-lg font-bold mb-4 flex items-center gap-2">
                            <span>
                                <svg width="24" height="24" viewBox="0 0 34 34" fill="none" class="text-dark"
                                    stroke="currentColor" stroke-width="3" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M11.3333 8.5H29.75M11.3333 17H29.75M11.3333 25.5H29.75M4.25 8.5H4.26417M4.25 17H4.26417M4.25 25.5H4.26417" />
                                </svg>
                            </span>
                            Последние брони
                        </h2>
                        <div id="bookingsList" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="js/api.js?v=2"></script>
    <script src="js/ui-utils.js"></script>
    <script src="js/admin-nav.js"></script>
    <script src="js/admin.js"></script>
    <script>
        // Mobile sidebar toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const adminSidebar = document.getElementById('adminSidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function toggleSidebar() {
            adminSidebar.classList.toggle('-translate-x-full');
            sidebarOverlay.classList.toggle('hidden');
        }

        mobileMenuBtn.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);
    </script>
</body>

</html>